upstream backend {
    ip_hash;
    server 172.31.38.239:3031;
} 

server {
    listen 80 ;
    server_name www.novalide.com ;

    gzip on;
    gzip_min_length  1k;
    gzip_buffers     4 16k;
    gzip_comp_level 8;
    gzip_types       text/plain application/x-javascript text/css application/xml application/json;
    gzip_vary on;

    access_log /opt/env/noval-web/logs/nginx/server_access.log novalide;
    error_log /opt/env/noval-web/logs/nginx/server_error.log ;

    location / {
	include uwsgi_params;
  	uwsgi_pass backend;
    }

    location /novalide-status {
        stub_status on;
        access_log off;
        allow 112.124.106.9;
        deny all;
    }

}
